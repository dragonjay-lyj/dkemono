---
interface Props {
  name: string;
  avatar: string;
  cover: string;
  service: string;
  slug: string;
}

const { name, avatar, cover, service, slug } = Astro.props;

// 数据验证：确保关键字段不为空，若为空则提供默认值或提示
const displayName = name || 'Unknown Artist';
const displayCover = cover || '/images/default-cover.jpg';
const displayAvatar = avatar || '/images/default-avatar.jpg';
const displayService = service || 'N/A';
---

<a
  href={`/artists/${slug}`}
  class="relative block rounded-xl overflow-hidden shadow-xl group transition-transform duration-500 hover:scale-105 focus:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500"
  aria-label={`View profile of ${displayName} on ${displayService}`}
  tabindex="0"
>
  <!-- 背景封面图片，带有悬停缩放效果，优化性能使用will-change -->
  <div class="relative w-full h-48 xs:h-56 sm:h-64 md:h-72 overflow-hidden will-change-transform">
    <img
      src={displayCover}
      alt={`${displayName} cover image`}
      class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 group-focus:scale-110"
      loading="lazy"
      decoding="async"
    />
    <!-- 渐变遮罩，增强文字可读性 -->
    <div class="absolute inset-0 bg-gradient-to-t from-gray-900/90 via-gray-900/50 to-transparent opacity-80 z-10"></div>
  </div>

  <!-- 画师信息区域，位于卡片底部，响应式调整内边距 -->
  <div class="absolute bottom-0 left-0 p-2 xs:p-3 sm:p-4 flex items-center z-20 w-full">
    <!-- 头像，带有悬停浮动动画，优化性能减少动画复杂度 -->
    <div class="relative will-change-transform">
      <img
        src={displayAvatar}
        alt={`${displayName} avatar`}
        class="w-8 h-8 xs:w-10 xs:h-10 sm:w-12 sm:h-12 rounded-full border-2 xs:border-3 border-white/90 shadow-lg transition-transform duration-300 group-hover:translate-y-[-4px] group-focus:translate-y-[-4px]"
        loading="lazy"
        decoding="async"
      />
      <!-- 头像悬停时的小光点效果，优化性能使用opacity变化 -->
      <div class="absolute -top-1 -right-1 w-2 h-2 xs:w-3 xs:h-3 bg-green-400 rounded-full opacity-0 group-hover:opacity-100 group-focus:opacity-100 transition-opacity duration-300"></div>
    </div>
    <!-- 画师名称和服务信息，响应式文本大小，添加工具提示避免截断 -->
    <div class="ml-2 xs:ml-2 sm:ml-3 overflow-hidden">
      <p class="text-white text-xs sm:text-sm font-medium truncate" title={displayService}>{displayService}</p>
      <h3 class="text-white text-sm xs:text-base sm:text-lg font-bold truncate" title={displayName}>{displayName}</h3>
    </div>
  </div>

  <!-- 卡片悬停时的额外装饰效果，优化性能使用简单边框变化 -->
  <div class="absolute inset-0 border-2 border-transparent group-hover:border-white/20 group-focus:border-white/20 transition-all duration-500 rounded-xl"></div>
</a>