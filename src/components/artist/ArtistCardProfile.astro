---
const { artist } = Astro.props;
const { name, avatar, cover, service, serviceUrl } = artist;
---

<div class="relative bg-gray-900 rounded-2xl overflow-hidden shadow-xl h-80 sm:h-96 w-full mb-6 md:mb-8 transition-all duration-500 hover:shadow-2xl hover:-translate-y-2 group">
  <!-- 封面图片，带灰色阴影遮罩和渐变效果 -->
  <div class="relative w-full h-full">
    <img
      src={cover}
      alt={`${name} 的封面`}
      class="object-cover w-full h-full opacity-70 transition-opacity duration-700 group-hover:opacity-50"
      loading="lazy"
      decoding="async"
      width="1200"
      height="600"
      sizes="(max-width: 768px) 100vw, (max-width: 1200px) 80vw, 60vw"
      srcset={`${cover}?w=600 600w, ${cover}?w=900 900w, ${cover}?w=1200 1200w`}
    />
    <!-- 渐变遮罩 -->
    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/50 to-transparent opacity-70"></div>
  </div>

  <!-- 内容区域：移动端上下结构，桌面端左右结构 -->
  <div class="absolute top-0 left-0 w-full h-full flex flex-col md:flex-row">
    <!-- 左半部分：画师头像 -->
    <div class="w-full md:w-1/2 h-1/2 md:h-full flex flex-col justify-center items-center z-10">
      <div class="w-24 h-24 sm:w-28 sm:h-28 md:w-36 md:h-36 rounded-full border-4 md:border-6 border-white/80 overflow-hidden shadow-lg transition-transform duration-300 hover:scale-105 hover:shadow-2xl">
        <img
          src={avatar}
          alt={`${name} 的头像`}
          class="object-cover w-full h-full transition-opacity duration-300 group-hover:opacity-90"
          loading="lazy"
          decoding="async"
          width="144"
          height="144"
        />
      </div>
    </div>
    <!-- 右半部分：服务来源和画师名 -->
    <div class="w-full md:w-1/2 h-1/2 md:h-full flex flex-col justify-center items-start md:items-end p-4 sm:p-6 md:p-8 z-10">
      <div class="flex items-center mb-2 md:mb-3 transition-colors duration-300 group-hover:text-blue-300">
        <!-- 服务来源图标 -->
        <span class="mr-2 md:mr-3 inline-block w-5 h-5 md:w-6 md:h-6 text-blue-300" aria-hidden="true">
          {
            service === 'Patreon' && (
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="currentColor"
                stroke="currentColor"
                stroke-width="1"
                stroke-linecap="round"
                stroke-linejoin="round"
                aria-hidden="true"
              >
                <path d="M14.828 21v-7.668c0-5.98-.163-7.322 1.256-7.476.822-.084 1.636-.16 2.44-.23h.057c.582-.057 1.21-.084 1.798-.11 1.156-.05 1.254.637 1.254.822v14.662h3.279v-18.21c0-.417-.116-.81-.36-1.148-.57-.785-1.795-1.258-2.955-1.258h-.057c-.798.026-1.595.102-2.385.23-.244.038-.488.082-.73.126-.163.03-.326.06-.488.094h-.028c-.442.066-.88.148-1.31.246-.417.094-.822.207-1.21.34-.785.267-1.467.637-1.979 1.148-.785.785-.979 1.979-.822 2.955.084.582.16 1.156.23 1.736v.057c.102 1.156.178 2.312.23 3.468v.028c.05.798.076 1.595.076 2.385 0 5.174-2.44 9.591-5.98 11.486-1.979 1.05-4.169 1.572-6.406 1.572-5.174 0-9.591-4.169-9.591-9.591s4.417-9.591 9.591-9.591c2.385 0 4.591.916 6.237 2.44 0 0-.785-2.955 1.148-4.591 1.979-1.677 4.591-2.44 7.322-2.44 2.237 0 4.417.582 6.237 1.677.916.55 1.677 1.31 2.237 2.237.267.442.488.916.637 1.41l.028.057c.148.36.246.73.31 1.106v18.21c0 .916-.785 1.677-1.677 1.677h-5.98c-.916 0-1.677-.761-1.677-1.677z" />
              </svg>
            )
          }
          {
            service === 'Fanbox' && (
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="currentColor"
                stroke="currentColor"
                stroke-width="1"
                stroke-linecap="round"
                stroke-linejoin="round"
                aria-hidden="true"
              >
                <path d="M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 2 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14" />
                <path d="M16.5 9.4 7.55 4.24" />
                <polyline points="3.29 7 12 12 20.71 7" />
                <line x1="12" y1="22" x2="12" y2="12" />
                <circle cx="18.5" cy="15.5" r="2.5" />
                <path d="M20.27 17.27 22 19" />
              </svg>
            )
          }
          {
            service === 'Gumroad' && (
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="currentColor"
                stroke="currentColor"
                stroke-width="1"
                stroke-linecap="round"
                stroke-linejoin="round"
                aria-hidden="true"
              >
                <path d="M12 2c5.522 0 10 4.477 10 10s-4.478 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 2a8 8 0 1 0 0 16 8 8 0 0 0 0-16zm-1 12v-2.586l-4-4L8.586 8 11 10.414V8h2v2.414l2.414-2.414 1.586 1.586-4 4H13V16h-2z" />
              </svg>
            )
          }
          {
            service !== 'Patreon' && service !== 'Fanbox' && service !== 'Gumroad' && (
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                aria-hidden="true"
              >
                <circle cx="12" cy="12" r="10" />
              </svg>
            )
          }
        </span>
        <p class="text-white/90 text-base md:text-lg font-medium transition-colors duration-300 group-hover:text-blue-300">{service}</p>
        <!-- 服务来源链接图标 (跳转到画师的服务页面) -->
        <a
          href={serviceUrl || `https://${service.toLowerCase()}.com/${name.toLowerCase().replace(/\s+/g, '-')}`}
          target="_blank"
          rel="noopener noreferrer"
          class="ml-2 md:ml-3 text-white/80 hover:text-blue-400 transition-transform duration-300 hover:scale-110"
          aria-label={`访问 ${name} 的 ${service} 页面`}
        >
          <svg
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2.5"
            stroke-linecap="round"
            stroke-linejoin="round"
            aria-hidden="true"
          >
            <path d="M18 8c0 4.5-6 9-6 9s-6-4.5-6-9a6 6 0 0 1 12 0Z" />
            <circle cx="12" cy="8" r="2" />
          </svg>
        </a>
      </div>
      <h2 class="text-white text-2xl md:text-3xl font-bold tracking-tight transition-colors duration-300 group-hover:text-blue-300">{name}</h2>
    </div>
  </div>
</div>