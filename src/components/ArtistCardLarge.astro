---
interface Props {
  name: string;
  avatar: string;
  cover: string;
  service: string;
}

const { name, avatar, cover, service } = Astro.props;

// 数据验证：确保关键字段不为空，若为空则提供默认值或提示
const displayName = name || 'Unknown Artist';
const displayCover = cover || '/images/default-cover.jpg';
const displayAvatar = avatar || '/images/default-avatar.jpg';
const displayService = service || 'N/A';
---

<div
  class="relative flex flex-col md:flex-row rounded-xl overflow-hidden shadow-xl mb-8 h-auto md:h-80 transition-all duration-500 hover:shadow-2xl focus-within:shadow-2xl will-change-transform"
  tabindex="0"
  aria-label={`Profile of ${displayName} on ${displayService}`}
  role="figure"
>
  <!-- 背景封面，带有悬停缩放效果，优化性能使用will-change -->
  <div class="absolute inset-0 overflow-hidden will-change-transform">
    <img
      src={displayCover}
      alt={`${displayName} cover image`}
      class="w-full h-full object-cover transition-transform duration-700 hover:scale-110 focus-within:scale-110"
      loading="lazy"
      decoding="async"
    />
    <!-- 渐变遮罩，增强文字可读性 -->
    <div class="absolute inset-0 bg-gradient-to-t from-gray-900/90 via-gray-900/50 to-transparent opacity-80 z-10"></div>
  </div>

  <!-- 内容区域，移动端上下布局，桌面端左右布局 -->
  <div class="relative z-20 flex flex-col md:flex-row h-full">
    <!-- 左侧区域：头像，移动端居中顶部，响应式调整大小 -->
    <div class="w-full md:w-1/2 flex items-center justify-center p-3 xs:p-4 md:p-6">
      <div class="relative will-change-transform">
        <img
          src={displayAvatar}
          alt={`${displayName} avatar`}
          class="w-20 h-20 xs:w-24 xs:h-24 md:w-32 md:h-32 rounded-full border-2 xs:border-3 md:border-4 border-white/90 shadow-lg transition-transform duration-300 hover:translate-y-[-6px] focus-within:translate-y-[-6px] animate-pulse-slow"
          loading="lazy"
          decoding="async"
        />
        <!-- 头像悬停时的环绕光晕效果，优化性能使用opacity变化 -->
        <div class="absolute inset-0 rounded-full border-2 border-white/30 opacity-0 hover:opacity-100 focus-within:opacity-100 transition-opacity duration-500 animate-pulse"></div>
      </div>
    </div>
    <!-- 右侧区域：画师信息，移动端底部，响应式调整文本大小和对齐方式 -->
    <div class="w-full md:w-1/2 flex flex-col justify-center p-3 xs:p-4 md:p-6 text-center md:text-left">
      <div class="flex items-center justify-center md:justify-start">
        <span class="text-white text-xs xs:text-sm md:text-lg font-medium truncate" title={displayService}>{displayService}</span>
      </div>
      <h2 class="text-white text-lg xs:text-xl md:text-3xl font-bold mt-1 truncate" title={displayName}>{displayName}</h2>
    </div>
  </div>
</div>

<!-- 自定义动画样式，优化性能减少动画复杂度 -->
<style>
  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.03); }
  }
  @keyframes pulse-slow {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.02); }
  }
  .animate-pulse {
    animation: pulse 2s ease-in-out infinite;
  }
  .animate-pulse-slow {
    animation: pulse-slow 3s ease-in-out infinite;
  }
</style>