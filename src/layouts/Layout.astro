---
interface Props {
  title: string;
  description: string;
  ogImage?: string; // 可选的Open Graph图片URL
}

const { title, description, ogImage = '/images/default-og-image.jpg' } = Astro.props;

import Footer from '../components/Footer.astro';
import "../styles/global.css";

// 环境变量支持：可通过环境变量配置站点URL
const siteUrl = import.meta.env.SITE_URL || 'https://your-site-url.com';
---

<!DOCTYPE html>
<html lang="zh-CN" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:image" content={ogImage} />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImage} />
    <link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css"
/>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Artist Gallery",
        "url": "${siteUrl}"
      }
    </script>
    <!-- 预加载关键资源，提升加载性能 -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <!-- 添加页面加载动画样式 -->
    <style>
      body {
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
      }
      body.loaded {
        opacity: 1;
      }
      .content-fade-in {
        opacity: 0;
        transform: translateY(10px);
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
      }
      .content-fade-in.visible {
        opacity: 1;
        transform: translateY(0);
      }
      /* 返回顶部按钮样式 */
      #back-to-top {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
        transform: translateY(20px);
      }
      #back-to-top.visible {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
      }
      #back-to-top:hover {
        transform: scale(1.1);
      }
    </style>
  </head>
  <body class="bg-gray-50 text-gray-800 text-sm xs:text-base">
    <!-- 主内容容器，响应式内边距和最大宽度 -->
    <div class="container mx-auto px-2 xs:px-3 sm:px-4 py-4 sm:py-6 max-w-7xl content-fade-in" role="main" aria-label="Main content area">
      <slot />
    </div>
    <Footer />

    <!-- 返回顶部按钮，响应式调整位置和大小 -->
    <button
      id="back-to-top"
      class="bg-blue-500 text-white rounded-full p-2 xs:p-3 shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-600 z-50"
      aria-label="Scroll back to top of page"
      tabindex={0}
      onclick="window.scrollTo({ top: 0, behavior: 'smooth' })"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 xs:h-5 xs:w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 10l7-7m0 0l7 7m-7-7v18" />
      </svg>
    </button>
    <script type="module">
      import { Fancybox } from "https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.esm.js";

      Fancybox.bind('[data-fancybox="gallery"]', {
        //
      });    
    </script>
  </body>
</html>

<!-- 自定义脚本，添加页面加载动画和返回顶部按钮逻辑 -->
<script>
  // 页面加载完成后添加渐显效果
  window.addEventListener('load', () => {
    document.body.classList.add('loaded');
    const content = document.querySelector('.content-fade-in');
    if (content) {
      setTimeout(() => content.classList.add('visible'), 100);
    }
  });

  // 滚动时显示/隐藏返回顶部按钮
  window.addEventListener('scroll', () => {
    const backToTop = document.getElementById('back-to-top');
    if (backToTop) {
      if (window.scrollY > 300) {
        backToTop.classList.add('visible');
      } else {
        backToTop.classList.remove('visible');
      }
    }
  });

  // 键盘支持：按下Home键返回顶部
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Home') {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  });
</script>